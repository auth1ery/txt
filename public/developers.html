<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>developers - txt</title>
<style>
body{margin:0;font-family:system-ui,sans-serif;background:#0f0f0f;color:#eaeaea}
#app{max-width:800px;margin:auto;padding:1rem}
textarea,input{width:100%;background:#0f0f0f;color:#eaeaea;border:1px solid #222;padding:.5rem;margin:.3rem 0;box-sizing:border-box}
button{padding:.4rem .8rem;margin:.2rem;border:1px solid #555;border-radius:.25rem;background:none;color:#aaa;cursor:pointer}
button:hover{border-color:#eaeaea;color:#fff}
button.danger{color:#c44}
button.danger:hover{border-color:#c44}
.key-card{border:1px solid #222;padding:1rem;margin:1rem 0;border-radius:.25rem}
.key-value{background:#1a1a1a;padding:.5rem;border-radius:.25rem;font-family:monospace;word-break:break-all;margin:.5rem 0}
.section{margin:2rem 0;padding:1rem 0;border-bottom:1px solid #222}
.endpoint{background:#1a1a1a;padding:.5rem;margin:.5rem 0;border-left:3px solid #4c4;font-family:monospace;font-size:.9rem}
.code-block{background:#1a1a1a;padding:1rem;border-radius:.25rem;overflow-x:auto;font-family:monospace;font-size:.85rem;margin:1rem 0}
pre{margin:0}
a{color:#4c4;text-decoration:none}
a:hover{text-decoration:underline}
.stats{color:#777;font-size:.85rem}
.back-btn{margin-bottom:1rem}
h1{color:#4c4}
h2{color:#eaeaea;margin-top:2rem}
h3{color:#aaa}
.footer{text-align:center;padding:2rem 0;margin-top:2rem;border-top:1px solid #222;font-size:.85rem}
.footer a{color:#777;text-decoration:none;margin:0 1rem}
.footer a:hover{color:#eaeaea}
</style>
</head>
<body>
<div id="app">
<button class="back-btn" onclick="location.href='/feed'">← back to feed</button>

<h1>API Documentatation</h1>

<p class="stats">
  A simple, public REST API for accessing public data on txt.
  It is very easy to use and easy to fetch.
  These APIs are used throughout txt as well, not just for user use.
</p>

<p>As txt scales on, these APIs may become unusable and reserved for internal use, or may be unstable.</p>

<div class="section">
  <h2>Public Endpoints</h2>

  <h3>Get latest posts</h3>
  <div class="endpoint">GET /api/posts</div>
  <p>
    Returns the most recent public posts. Posts are ordered newest first.
  </p>

  <p class="stats">Query parameters:</p>
  <ul class="stats">
    <li><code>offset</code> (optional) — number of posts to skip (pagination)</li>
  </ul>

  <div class="code-block">
    <pre>{
  "posts": [
    {
      "id": 123,
      "nickname": "user",
      "content": "hello world",
      "created_at": 1710000000000,
      "score": 5
    }
  ],
  "comments": [
    {
      "id": 456,
      "post_id": 123,
      "parent_id": null,
      "nickname": "anotheruser",
      "content": "nice post",
      "created_at": 1710000001000
    }
  ]
}</pre>
  </div>

  <p class="stats">
    Notes:
    <br>• Results are cached briefly for performance
    <br>• Maximum of 20 posts returned per request. Any more will likely fail.
  </p>
</div>

<div class="section">
  <h3>Get user profile</h3>
  <div class="endpoint">GET /api/profile/:nickname</div>
  <p>
    Returns public profile information and statistics for a user.
  </p>

  <div class="code-block">
    <pre>{
  "nickname": "user",
  "created_at": 1700000000000,
  "bio": "",
  "status": "",
  "timezone": "UTC",
  "pronouns": "",
  "posts": 12,
  "comments": 34,
  "joinNumber": 42,
  "controversyScore": 63,
  "upvotes": 120,
  "downvotes": 70,
  "lastPost": {
    "id": 789,
    "content": "latest post",
    "created_at": 1710000100000
  }
}</pre>
  </div>
</div>

<div class="section">
  <h3>Get total user count</h3>
  <div class="endpoint">GET /api/usercount</div>
  <p>
    Returns the total number of registered users. 
  </p>

  <div class="code-block">
    <pre>{
  "count": "1234"
}</pre>
  </div>
</div>

<div class="section">
  <h2>Notes before use:</h2>
  <p class="stats">
    This API is provided for experimentation and personal projects. The APIs used are REST APIs. 
    There is no guarantee of long-term stability or support. 
    Heavy scraping or abuse <strong>may</strong> be rate-limited or blocked, as with all REST APIs do.
  </p>
</div>

<p>You can see the APIs in action here:
  <br>
  <a href="https://txt-ctgm.onrender.com/api/posts">/api/posts</a><br>
  <a href="https://txt-ctgm.onrender.com/api/profile/auth">/api/profile/:nickname</a><br>
  <a href="https://txt-ctgm.onrender.com/api/usercount">/api/usercount</a>
</p>
  
<div class="footer">
  <a href="/privacy">privacy policy</a>
  <a href="/terms">terms of service</a>
  <a href="/license">license</a>
  <a href="https://txt1.statuspage.io/" target="_blank">status</a>
</div>
</body>
</html>
